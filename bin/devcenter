#!/usr/bin/env ruby

require 'devcenter'

command = ARGV.shift
filename = ARGV.shift

case command
when 'push'
  raise "no filename given" unless filename
  article = {
    :title => "Hello, World",
    :content => Devcenter::Source.new(File.read(filename)).to_s,
    :status => 'draft',
    :category_id => '1'
  }

  puts "password:"
  Devcenter.login!("csquared@heroku.com", gets)
  Devcenter.push!(article)
when 'compile'
  raise "no filename given" unless filename
  puts Devcenter::Source.new(File.read(filename))
else 
  puts "devcenter [compile|push] filename"
end
